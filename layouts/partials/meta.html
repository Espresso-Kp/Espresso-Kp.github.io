<meta name="description" content="{{ if .Params.Subtitle }}{{ .Params.Subtitle }}{{else}}{{ .Site.Params.Subtitle }}{{ end }}" />

<title itemprop="name">{{ default .Site.Title .Title }}</title>
<meta property="og:title" content="{{ default .Site.Title .Title }}" />
<meta name="twitter:title" content="{{ default .Site.Title .Title }}" />
<meta itemprop="name" content="{{ default .Site.Title .Title }}" />
<meta property="og:site_name" content="{{ .Site.Params.sitename }}" />
<meta name="description" content="{{ default .Site.Params.Subtitle .Params.Subtitle }}" />
<meta itemprop="description" content="{{ default .Site.Params.Subtitle .Params.Subtitle }}" />
<meta property="og:description" content="{{ default .Site.Params.Subtitle .Params.Subtitle }}" />
<meta name="twitter:description" content="{{ default .Site.Params.Subtitle .Params.Subtitle }}" />
<base href="{{ .RelPermalink }}">
<link rel="canonical" href="{{ .Permalink }}" itemprop="url" /> 
<meta name="url" content="{{ .Permalink }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta name="twitter:url" content="{{ .Permalink }}" />
<meta name="twitter:card" content="summary" />
{{ with .Site.Params.Author }}
    <meta name="twitter:creator" content="{{ . }}" />
{{ end }}
{{ $img := "" }}
{{ if .Params.images }}
    {{ $imgPath := index .Params.images 0 }}
    {{ if hasPrefix $imgPath "/" }}
        {{/* Static images from /static directory */}}
        {{ $img = resources.Get (strings.TrimPrefix "/" $imgPath) }}
    {{ else if hasPrefix $imgPath "http" }}
        {{/* Skip remote images to avoid fetch errors */}}
    {{ else }}
        {{/* Images from assets/images directory */}}
        {{ $img = resources.Get (printf "images/%s" $imgPath) }}
    {{ end }}
{{ else if .Site.Params.image }}
    {{ $imgPath := .Site.Params.image }}
    {{ if hasPrefix $imgPath "/" }}
        {{ $img = resources.Get (strings.TrimPrefix "/" $imgPath) }}
    {{ else if hasPrefix $imgPath "http" }}
        {{/* Skip remote images */}}
    {{ else }}
        {{ $img = resources.Get (printf "images/%s" $imgPath) }}
    {{ end }}
{{ end }}
{{ with $img }}
    {{ $resized := .Fill "800x418 center webp q75" }}
    <meta itemprop="image" content="{{ $resized.Permalink }}" />
    <meta property="og:image" content="{{ $resized.Permalink }}" />
    <meta name="twitter:image" content="{{ $resized.Permalink }}" />
{{ end }}
<meta property="og:locale" content="{{ .Language.Lang }}">
